# 智阅3.0系统集成测试计划

## 测试概述

### 测试目标
验证智阅3.0系统各模块间的集成功能，确保前后端协作正常，核心业务流程完整可用。

### 测试范围
- 前后端服务启动和健康检查
- 用户认证系统集成
- 文件上传和OCR处理流程
- 考试管理和阅卷工作流
- 数据库连接和数据持久化
- API接口集成测试

### 测试环境
- **后端**: FastAPI + SQLAlchemy + PostgreSQL
- **前端**: React + TypeScript + Vite
- **AI服务**: Google Gemini API
- **文件存储**: 本地文件系统

## 测试用例

### TC001: 服务启动和健康检查
**目标**: 验证前后端服务能正常启动并响应健康检查

**前置条件**:
- 环境变量配置正确
- 数据库服务可用

**测试步骤**:
1. 启动后端服务 (FastAPI)
2. 验证后端健康检查接口 `/health`
3. 启动前端服务 (Vite)
4. 验证前端页面加载
5. 检查控制台错误信息

**预期结果**:
- 后端服务在8000端口正常运行
- 前端服务在5173端口正常运行
- 健康检查返回200状态码
- 前端页面正常加载，无控制台错误

### TC002: 用户认证系统集成
**目标**: 验证用户登录、注册、权限验证流程

**测试步骤**:
1. 测试用户注册接口
2. 测试用户登录接口
3. 验证JWT token生成和验证
4. 测试受保护路由访问
5. 测试token过期处理

**预期结果**:
- 用户能成功注册和登录
- JWT token正确生成和验证
- 受保护路由正确拦截未授权访问
- token过期后正确跳转登录页

### TC003: 文件上传和OCR处理
**目标**: 验证文件上传、图像质量检测、OCR识别流程

**测试步骤**:
1. 上传测试图片文件
2. 验证文件存储到指定目录
3. 触发图像质量检测
4. 执行OCR文字识别
5. 验证识别结果返回

**预期结果**:
- 文件成功上传并存储
- 图像质量检测正常执行
- OCR识别返回正确文字内容
- 处理状态正确更新

### TC004: 考试管理和阅卷工作流
**目标**: 验证完整的考试创建到阅卷完成流程

**测试步骤**:
1. 创建新考试
2. 上传答题卡模板
3. 上传学生答卷
4. 执行自动阅卷
5. 查看阅卷结果
6. 导出成绩报告

**预期结果**:
- 考试创建成功
- 模板和答卷正确上传
- 自动阅卷正常执行
- 阅卷结果准确显示
- 成绩报告正确导出

### TC005: 数据库集成测试
**目标**: 验证数据库连接、数据持久化、事务处理

**测试步骤**:
1. 验证数据库连接
2. 测试数据CRUD操作
3. 验证数据关联查询
4. 测试事务回滚
5. 检查数据一致性

**预期结果**:
- 数据库连接正常
- CRUD操作执行成功
- 关联查询返回正确结果
- 事务处理正确
- 数据保持一致性

## 测试执行计划

### 阶段1: 基础服务测试 (30分钟)
- [ ] TC001: 服务启动和健康检查
- [ ] TC005: 数据库集成测试

### 阶段2: 核心功能测试 (45分钟)
- [ ] TC002: 用户认证系统集成
- [ ] TC003: 文件上传和OCR处理

### 阶段3: 业务流程测试 (60分钟)
- [ ] TC004: 考试管理和阅卷工作流

### 阶段4: 测试报告生成 (15分钟)
- [ ] 汇总测试结果
- [ ] 生成测试报告
- [ ] 更新任务进度

## 测试数据

### 测试用户
```json
{
  "username": "test_user",
  "email": "test@example.com",
  "password": "Test123456"
}
```

### 测试文件
- `test_images/high_quality.jpg` - 高质量测试图片
- `test_images/noisy_image.jpg` - 噪声图片
- `test_images/skewed_image.jpg` - 倾斜图片

## 验收标准

### 通过标准
- 所有测试用例执行通过率 ≥ 90%
- 关键业务流程无阻塞性错误
- 系统响应时间在可接受范围内
- 数据一致性和完整性得到保证

### 失败处理
- 记录详细错误信息
- 分析根本原因
- 制定修复计划
- 重新执行失败用例

---

**创建时间**: 2025-01-27 18:45  
**负责人**: 系统测试工程师  
**预计执行时间**: 2.5小时